{{ $isBlog := eq .RelPermalink "/blog/" }}
{{ $showSearch := and $isBlog site.Params.show_search }}

{{ $pages := where site.RegularPages.ByPublishDate.Reverse "Section" "==" "blog" }}

{{ if $isBlog }}
  {{ $pages = where $pages "Draft" "==" false }}
{{ else }}
  {{ $pages = where $pages "Draft" "==" true }}
{{ end }}

<div class="container">
  <h1>{{ .Title }}</h1>

  {{ if $showSearch }}
    <input
      class=""
      id="search"
      type="text"
      aria-label="Search by title"
      placeholder="Disabled..."
      disabled
    >
  {{ end }}

  <p class="" id="count">
    <strong>Count:</strong> {{ len $pages }}
  </p>

  <div id="list" class="">
    {{ range $pages }}
      <p>
        {{ .PublishDate.Format site.Params.date_format }}
        <br>
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      </p>
    {{ end }}
  </div>
</div>
